<!DOCTYPE html>
<!-- saved from url=(0085)http://javascript.info/tutorial/events-and-timing-depth#javascript-is-single-threaded -->
<html xmlns:og="http://opengraphprotocol.org/schema/" xmlns:fb="http://www.facebook.com/2008/fbml" xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr" id="html-main" class="js"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Events and timing in-depth | JavaScript Tutorial</title>

<meta property="fb:app_id" content="112959575461438">
<link rel="prev" href="http://javascript.info/tutorial/settimeout-setinterval">
<link rel="up" href="http://javascript.info/tutorial/timing">
<link rel="next" href="http://javascript.info/tutorial/frames-and-windows">
<link rel="prev" href="http://javascript.info/tutorial/settimeout-setinterval">
<link rel="next" href="http://javascript.info/tutorial/popup-windows">
<script async="" src="./Javascript is single-threaded_files/ga.js"></script><script>
// event.type must be keypress
function getChar(event) {
  if (event.which == null) {
    return String.fromCharCode(event.keyCode) // IE
  } else if (event.which!=0 && event.charCode) {
    return String.fromCharCode(event.which)   // the rest
  } else {
    return null // special key
  }
}
</script>
<link type="text/css" rel="stylesheet" media="all" href="./Javascript is single-threaded_files/book.css">
<link type="text/css" rel="stylesheet" media="all" href="./Javascript is single-threaded_files/content-module.css">
<link type="text/css" rel="stylesheet" media="all" href="./Javascript is single-threaded_files/dhtml_menu.css">
<link type="text/css" rel="stylesheet" media="all" href="./Javascript is single-threaded_files/fbconnect.css">
<link type="text/css" rel="stylesheet" media="all" href="./Javascript is single-threaded_files/jquery.alerts.css">
<link type="text/css" rel="stylesheet" media="all" href="./Javascript is single-threaded_files/node.css">
<link type="text/css" rel="stylesheet" media="all" href="./Javascript is single-threaded_files/shCore.css">
<link type="text/css" rel="stylesheet" media="all" href="./Javascript is single-threaded_files/shThemeDefault.css">
<link type="text/css" rel="stylesheet" media="all" href="./Javascript is single-threaded_files/defaults.css">
<link type="text/css" rel="stylesheet" media="all" href="./Javascript is single-threaded_files/system.css">
<link type="text/css" rel="stylesheet" media="all" href="./Javascript is single-threaded_files/system-menus.css">
<link type="text/css" rel="stylesheet" media="all" href="./Javascript is single-threaded_files/user.css">
<link type="text/css" rel="stylesheet" media="all" href="./Javascript is single-threaded_files/fieldgroup.css">
<link type="text/css" rel="stylesheet" media="all" href="./Javascript is single-threaded_files/views.css">
<link type="text/css" rel="stylesheet" media="all" href="./Javascript is single-threaded_files/style.css">
<link type="text/css" rel="stylesheet" media="all" href="./Javascript is single-threaded_files/linkindication.css">
<script type="text/javascript" src="./Javascript is single-threaded_files/jquery.js"></script><style type="text/css"></style>
<script type="text/javascript" src="./Javascript is single-threaded_files/drupal.js"></script>
<script type="text/javascript" src="./Javascript is single-threaded_files/dhtml_menu.js"></script>
<script type="text/javascript" src="./Javascript is single-threaded_files/user.js"></script>
<script type="text/javascript" src="./Javascript is single-threaded_files/hotkeys.js"></script>
<script type="text/javascript" src="./Javascript is single-threaded_files/fbconnect.js"></script>
<script type="text/javascript" src="./Javascript is single-threaded_files/mistype.js"></script>
<script type="text/javascript" src="./Javascript is single-threaded_files/json_server.js"></script>
<script type="text/javascript" src="./Javascript is single-threaded_files/myfilter.js"></script>
<script type="text/javascript" src="./Javascript is single-threaded_files/jquery.cookie.js"></script>
<script type="text/javascript" src="./Javascript is single-threaded_files/jquery.alerts.js"></script>
<script type="text/javascript" src="./Javascript is single-threaded_files/misc.js"></script>
<script type="text/javascript" src="./Javascript is single-threaded_files/syntaxhighlighter.min.js"></script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
jQuery.extend(Drupal.settings, {"basePath":"\/","dhtmlMenu":{"slide":"slide","clone":"clone"},"fbconnect":{"user_pictures":"allow","language_code":"en_US","app_id":"112959575461438","debug":1,"connect_js":"document.location.protocol + '\/\/connect.facebook.net\/en_US\/all.js'","loginout_mode":"manual","invite_name":"JavaScript Tutorial","fast_reg_mode":1,"fast_reg_autoname":0,"fbuid":null,"user":{"uid":0,"fbuid":null}},"baseurl":"http:\/\/javascript.info\/"});
//--><!]]>
</script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--

  SyntaxHighlighter.config.clipboardSwf = '/modules/syntaxhighlighter/sh/scripts/clipboard.swf'
  $(function() {
    SyntaxHighlighter.highlight()
    })
  
//--><!]]>
</script>
<script type="text/javascript"> </script>
<style type="text/css">.fb_hidden{position:absolute;top:-10000px;z-index:10001}.fb_reposition{overflow-x:hidden;position:relative}.fb_invisible{display:none}.fb_reset{background:none;border:0;border-spacing:0;color:#000;cursor:auto;direction:ltr;font-family:"lucida grande", tahoma, verdana, arial, sans-serif;font-size:11px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:1;margin:0;overflow:visible;padding:0;text-align:left;text-decoration:none;text-indent:0;text-shadow:none;text-transform:none;visibility:visible;white-space:normal;word-spacing:normal}.fb_reset>div{overflow:hidden}.fb_link img{border:none}
.fb_dialog{background:rgba(82, 82, 82, .7);position:absolute;top:-10000px;z-index:10001}.fb_reset .fb_dialog_legacy{overflow:visible}.fb_dialog_advanced{padding:10px;-moz-border-radius:8px;-webkit-border-radius:8px;border-radius:8px}.fb_dialog_content{background:#fff;color:#333}.fb_dialog_close_icon{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 0 transparent;_background-image:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/yL/r/s816eWC-2sl.gif);cursor:pointer;display:block;height:15px;position:absolute;right:18px;top:17px;width:15px}.fb_dialog_mobile .fb_dialog_close_icon{top:5px;left:5px;right:auto}.fb_dialog_padding{background-color:transparent;position:absolute;width:1px;z-index:-1}.fb_dialog_close_icon:hover{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 -15px transparent;_background-image:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/yL/r/s816eWC-2sl.gif)}.fb_dialog_close_icon:active{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 -30px transparent;_background-image:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/yL/r/s816eWC-2sl.gif)}.fb_dialog_loader{background-color:#f6f7f8;border:1px solid #606060;font-size:24px;padding:20px}.fb_dialog_top_left,.fb_dialog_top_right,.fb_dialog_bottom_left,.fb_dialog_bottom_right{height:10px;width:10px;overflow:hidden;position:absolute}.fb_dialog_top_left{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 0;left:-10px;top:-10px}.fb_dialog_top_right{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 -10px;right:-10px;top:-10px}.fb_dialog_bottom_left{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 -20px;bottom:-10px;left:-10px}.fb_dialog_bottom_right{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 -30px;right:-10px;bottom:-10px}.fb_dialog_vert_left,.fb_dialog_vert_right,.fb_dialog_horiz_top,.fb_dialog_horiz_bottom{position:absolute;background:#525252;filter:alpha(opacity=70);opacity:.7}.fb_dialog_vert_left,.fb_dialog_vert_right{width:10px;height:100%}.fb_dialog_vert_left{margin-left:-10px}.fb_dialog_vert_right{right:0;margin-right:-10px}.fb_dialog_horiz_top,.fb_dialog_horiz_bottom{width:100%;height:10px}.fb_dialog_horiz_top{margin-top:-10px}.fb_dialog_horiz_bottom{bottom:0;margin-bottom:-10px}.fb_dialog_iframe{line-height:0}.fb_dialog_content .dialog_title{background:#6d84b4;border:1px solid #3a5795;color:#fff;font-size:14px;font-weight:bold;margin:0}.fb_dialog_content .dialog_title>span{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/yd/r/Cou7n-nqK52.gif) no-repeat 5px 50%;float:left;padding:5px 0 7px 26px}body.fb_hidden{-webkit-transform:none;height:100%;margin:0;overflow:visible;position:absolute;top:-10000px;left:0;width:100%}.fb_dialog.fb_dialog_mobile.loading{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/ya/r/3rhSv5V8j3o.gif) white no-repeat 50% 50%;min-height:100%;min-width:100%;overflow:hidden;position:absolute;top:0;z-index:10001}.fb_dialog.fb_dialog_mobile.loading.centered{width:auto;height:auto;min-height:initial;min-width:initial;background:none}.fb_dialog.fb_dialog_mobile.loading.centered #fb_dialog_loader_spinner{width:100%}.fb_dialog.fb_dialog_mobile.loading.centered .fb_dialog_content{background:none}.loading.centered #fb_dialog_loader_close{color:#fff;display:block;padding-top:20px;clear:both;font-size:18px}#fb-root #fb_dialog_ipad_overlay{background:rgba(0, 0, 0, .45);position:absolute;left:0;top:0;width:100%;min-height:100%;z-index:10000}#fb-root #fb_dialog_ipad_overlay.hidden{display:none}.fb_dialog.fb_dialog_mobile.loading iframe{visibility:hidden}.fb_dialog_content .dialog_header{-webkit-box-shadow:white 0 1px 1px -1px inset;background:-webkit-gradient(linear, 0% 0%, 0% 100%, from(#738ABA), to(#2C4987));border-bottom:1px solid;border-color:#1d4088;color:#fff;font:14px Helvetica, sans-serif;font-weight:bold;text-overflow:ellipsis;text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0;vertical-align:middle;white-space:nowrap}.fb_dialog_content .dialog_header table{-webkit-font-smoothing:subpixel-antialiased;height:43px;width:100%}.fb_dialog_content .dialog_header td.header_left{font-size:12px;padding-left:5px;vertical-align:middle;width:60px}.fb_dialog_content .dialog_header td.header_right{font-size:12px;padding-right:5px;vertical-align:middle;width:60px}.fb_dialog_content .touchable_button{background:-webkit-gradient(linear, 0% 0%, 0% 100%, from(#4966A6), color-stop(.5, #355492), to(#2A4887));border:1px solid #2f477a;-webkit-background-clip:padding-box;-webkit-border-radius:3px;-webkit-box-shadow:rgba(0, 0, 0, .117188) 0 1px 1px inset, rgba(255, 255, 255, .167969) 0 1px 0;display:inline-block;margin-top:3px;max-width:85px;line-height:18px;padding:4px 12px;position:relative}.fb_dialog_content .dialog_header .touchable_button input{border:none;background:none;color:#fff;font:12px Helvetica, sans-serif;font-weight:bold;margin:2px -12px;padding:2px 6px 3px 6px;text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0}.fb_dialog_content .dialog_header .header_center{color:#fff;font-size:16px;font-weight:bold;line-height:18px;text-align:center;vertical-align:middle}.fb_dialog_content .dialog_content{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/y9/r/jKEcVPZFk-2.gif) no-repeat 50% 50%;border:1px solid #555;border-bottom:0;border-top:0;height:150px}.fb_dialog_content .dialog_footer{background:#f6f7f8;border:1px solid #555;border-top-color:#ccc;height:40px}#fb_dialog_loader_close{float:left}.fb_dialog.fb_dialog_mobile .fb_dialog_close_button{text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0}.fb_dialog.fb_dialog_mobile .fb_dialog_close_icon{visibility:hidden}#fb_dialog_loader_spinner{animation:rotateSpinner 1.2s linear infinite;background-color:transparent;background-image:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/yD/r/t-wz8gw1xG1.png);background-repeat:no-repeat;background-position:50% 50%;height:24px;width:24px}@keyframes rotateSpinner{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}
.fb_iframe_widget{display:inline-block;position:relative}.fb_iframe_widget span{display:inline-block;position:relative;text-align:justify}.fb_iframe_widget iframe{position:absolute}.fb_iframe_widget_fluid_desktop,.fb_iframe_widget_fluid_desktop span,.fb_iframe_widget_fluid_desktop iframe{max-width:100%}.fb_iframe_widget_fluid_desktop iframe{min-width:220px;position:relative}.fb_iframe_widget_lift{z-index:1}.fb_hide_iframes iframe{position:relative;left:-10000px}.fb_iframe_widget_loader{position:relative;display:inline-block}.fb_iframe_widget_fluid{display:inline}.fb_iframe_widget_fluid span{width:100%}.fb_iframe_widget_loader iframe{min-height:32px;z-index:2;zoom:1}.fb_iframe_widget_loader .FB_Loader{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/y9/r/jKEcVPZFk-2.gif) no-repeat;height:32px;width:32px;margin-left:-16px;position:absolute;left:50%;z-index:4}</style></head>
<body class="body-main arial">
 
<div class="make-it-center">
 
<div id="logo-container">
<div class="clear-block">
<div id="logo-no-padding">
<div id="logo-picture">
<a href="http://javascript.info/" style="text-decoration:none" title="Home"><h1 id="logo">JavaScript Tutorial</h1></a>
</div>
</div>
<div id="top-links">
<ul class="top-links-ul">
<li><a href="http://javascript.info/user?destination=%2Fnode%2F152">Log in</a></li>
</ul>
</div>
</div>
 
</div>
 
<hr style="height:0;border:1px solid gray">
 
<div class="column-2
no-left-column
">
 
 
<div class="breadcrumb"><a href="http://javascript.info/">Home</a> » <a href="http://javascript.info/root">Tutorial</a> » <a href="http://javascript.info/tutorial/timing">Timing</a></div>
<div class="book-navigation book-navigation-upper" id="book-navigation-152">
<div class="page-links clear-block">
<a title="Go to previous page" class="page-previous" href="http://javascript.info/tutorial/settimeout-setinterval">‹ Understanding timers: setTimeout and setInterval </a>
<a title="Go to next page" class="page-next" href="http://javascript.info/tutorial/popup-windows">Popup windows ›</a>
</div>
</div>
<h1 class="title">Events and timing in-depth</h1>  
<div class="main-content-block">
<div id="node" style="font-family:inherit" data-format="2" class="node node-nid-152">
<div style="float:right">
<iframe id="twitter-widget-i1440771118211316166" scrolling="no" frameborder="0" allowtransparency="true" class="twitter-share-button twitter-share-button-rendered twitter-tweet-button" src="./Javascript is single-threaded_files/tweet_button.77d41fbc5fa275535329b16ae6381b57.en.html" style="position: static; visibility: visible; width: 81px; height: 20px;"></iframe>
<script type="text/javascript" src="./Javascript is single-threaded_files/widgets.js"></script>
<div class="fb-social-like-widget"><fb:like href="http://javascript.info/tutorial/events-and-timing-depth" send="false" layout="button_count" show_faces="false" width="" action="like" font="verdana" colorscheme="light" class=" fb_iframe_widget" fb-xfbml-state="rendered" fb-iframe-plugin-query="action=like&amp;app_id=112959575461438&amp;color_scheme=light&amp;container_width=0&amp;font=verdana&amp;href=http%3A%2F%2Fjavascript.info%2Ftutorial%2Fevents-and-timing-depth&amp;layout=button_count&amp;locale=en_US&amp;sdk=joey&amp;send=false&amp;show_faces=false"><span style="vertical-align: bottom; width: 79px; height: 20px;"><iframe name="f173224e08" width="1000px" height="1000px" frameborder="0" allowtransparency="true" allowfullscreen="true" scrolling="no" title="fb:like Facebook Social Plugin" src="./Javascript is single-threaded_files/like.html" style="border: none; visibility: visible; width: 79px; height: 20px;" class=""></iframe></span></fb:like></div> </div>
<span class="submitted"><a href="http://javascript.info/users/ilya-kantor">Ilya Kantor</a></span>
<ol class="toc-full"><li><a href="./Javascript is single-threaded_files/Javascript is single-threaded.html">JavaScript is single-threaded</a></li><li><a href="http://javascript.info/tutorial/events-and-timing-depth#asynchronous-events">Asynchronous events</a><ol><li><a href="http://javascript.info/tutorial/events-and-timing-depth#stacked-events">Stacked events</a></li></ol></li><li><a href="http://javascript.info/tutorial/events-and-timing-depth#the-settimeout-func-0-trick">The <code>setTimeout(func, 0)</code> trick</a><ol><li><a href="http://javascript.info/tutorial/events-and-timing-depth#delay-triggering-to-let-parent-work">Delay triggering to let parent work</a></li><li><a href="http://javascript.info/tutorial/events-and-timing-depth#give-the-browser-time-for-job">Give the browser time for job</a></li></ol></li><li><a href="http://javascript.info/tutorial/events-and-timing-depth#synchronous-events">Synchronous events</a><ol><li><a href="http://javascript.info/tutorial/events-and-timing-depth#dom-mutation-events-are-synchronous">DOM mutation events are synchronous.</a></li><li><a href="http://javascript.info/tutorial/events-and-timing-depth#nested-dom-events-are-synchronous">Nested DOM events are synchronous.</a></li></ol></li><li><a href="http://javascript.info/tutorial/events-and-timing-depth#javascript-execution-and-rendering">JavaScript execution and rendering</a></li><li><a href="http://javascript.info/tutorial/events-and-timing-depth#modal-and-synchronous-calls">Modal and synchronous calls</a><ol><li><a href="http://javascript.info/tutorial/events-and-timing-depth#opera-iframes-exception">Opera: <code>iframes</code> exception.</a></li></ol></li><li><a href="http://javascript.info/tutorial/events-and-timing-depth#script-taking-too-long-and-heavy-jobs">Script taking too long and heavy jobs</a></li><li><a href="http://javascript.info/tutorial/events-and-timing-depth#summary">Summary</a></li></ol>
<div class="content clear-block node-book" id="content-container"> <p>Internally, the browsers are event-driven. Most actions occur asynchronously and create an event which is appended to the queue.</p>
<p>They are taken from the queue and processed when the time permits. For example:</p>
<ul>
<li>A script has finished loading.</li>
<li>Keypress, mousemove.</li>
<li>The window is resized.</li>
</ul>
<p>Many events are integrated with JavaScript and many events are strictly internal.</p>
<h2 id="javascript-is-single-threaded">JavaScript is single-threaded</h2>
<p><strong>There is only one JavaScript thread per window.</strong> Other activities like rendering, downloading etc may be managed by separate threads, with different priorities. </p>
<p></p><div class="smart"><div class="smart-header">Web Workers</div> <p>There is a <a href="http://www.w3.org/TR/workers/">Web Workers</a> standard (incomplete at the time of writing) which defines the support for multiple JavaScript <em>workers</em>. A worker is an independent JavaScript subprocess. </p>
<p>Web workers are limited. They are able to execute JavaScript and exchange messages with the parent process, but they can’t access DOM.</p>
</div><p></p>
<h2 id="asynchronous-events">Asynchronous events</h2>
<p>Most events are asynchronous. </p>
<p><strong>When an asynchronous event occurs, it gets into the <em>Event queue</em>.</strong></p>
<p>The browser has inner loop, called <em>Event Loop</em>, which checks the queue and processes events, executes functions etc.</p>
<p>For example, if the browser is busy processing your <code>onclick</code>, and another event happened in the background (like script <code>onload</code>), it appends to the queue. When the <code>onclick</code> handler is complete, the queue is checked and the script is executed.</p>
<p><code>setTimeout/setInterval</code> also put executions of their functions into the event queue if browser is busy.</p>
<p>In fact, most interactions and activities get passed through the Event Loop.</p>
<h3 id="stacked-events">Stacked events</h3>
<p></p><div class="summary"> <p>There are cases when multiple events are appended to the queue in a batch.</p>
</div><p></p>
<p>For example, <code>mousedown</code> followed by <code>mouseup</code> on the same screen location causes <code>click</code> event. The two events: <code>mouseup</code> and <code>click</code> events are appended to the queue at the same time. </p>
<p>The <code>focus</code> event may come stacked with <code>mousedown</code>. </p>
<h2 id="the-settimeout-func-0-trick">The <code>setTimeout(func, 0)</code> trick</h2>
<p>When <code>setTimeout</code> gets <code>0</code> as the last argument, it attempts to execute the <code>func</code> as soon as possible.</p>
<p>The execution of <code>func</code> goes to the Event queue on the nearest timer tick. Note, that’s not immediately. No actions are performed until the next tick.</p>
<p></p><div class="smart"><div class="smart-header">Measure your setTimeout(.., 0) resolution</div> <p>
The following example demonstrates the average time until <code>setTimeout(func, 0)</code> executes.</p>
<p>Basically, it makes 1000 calls of <code>setTimeout(.., 0)</code>, sums the time between them, then calculates the average.</p>
<p>Please, wait a bit after you run this one. It needs time, because measurements need time. The CPU load should be low.</p>
<p></p><div id="highlighter_546932" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_546932_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_546932" menu="false" src="/modules/syntaxhighlighter/sh/scripts/clipboard.swf"></div><a href="http://javascript.info/tutorial/events-and-timing-depth#viewSource" title="show clean source in new window" class="item viewSource" style="width: 16px; height: 16px;">show clean source in new window</a><a href="http://javascript.info/tutorial/events-and-timing-depth#noList" title="Hide/show line numbers" class="item noList" style="width: 16px; height: 16px;">Hide/show line numbers</a><a href="http://javascript.info/tutorial/events-and-timing-depth#printSource" title="print highlighted code" class="item printSource" style="width: 16px; height: 16px;">print highlighted code</a></div></div><div class="lines"><div class="run-toolbar"><input type="button" class="run-button" value="Run!"><a href="http://javascript.info/tutorial/events-and-timing-depth#" title="Switch to edit mode" class="edit-button">&nbsp;&nbsp;&nbsp;</a></div><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="keyword">var</code> <code class="plain">i = 0, diff = 0, d = </code><code class="keyword">new</code> <code class="plain">Date()</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="keyword">var</code> <code class="plain">timer = setTimeout(</code><code class="keyword">function</code><code class="plain">() {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">diff += </code><code class="keyword">new</code> <code class="plain">Date() - d</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">timer = setTimeout(arguments.callee, 0)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">if</code> <code class="plain">(i++==1000) {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">clearTimeout(timer)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">alert(</code><code class="string">"Resolution: "</code><code class="plain">+diff/i)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">d = </code><code class="keyword">new</code> <code class="plain">Date()</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="plain">}, 0)</code></td></tr></tbody></table></div></div></div><p></p>
<p>Resolution of 10 ms means that a function scheduled with <code>setTimeout(.., 0)</code> executes after 10ms.</p>
</div><p></p>
<p>The <code>setTimeout(.., 0)</code> trick is used to execute the code after stacked events and fix timing-related problems.</p>
<p>Real-life examples follow.</p>
<h3 id="delay-triggering-to-let-parent-work">Delay triggering to let parent work</h3>
<p>An event triggers first on a child, then bubbles to it’s parents. But a child may want to trigger <em>after</em> the parent.</p>
<p>For example, there is a <code>document.keypress</code> which manages hotkeys, and the child want to process the event after hotkey management is complete.</p>
<p>Or, there is a drag’n’drop managed by <code>document.mouse...</code> handlers, and the child element wants to do it’s processing after drag’n’drop.</p>
<p>Event capturing is not supported in IE&lt;9. And there can be other reasons to avoid it.</p>
<p>The recipe is usually <code>setTimeout(.., 0)</code>. On the example below, the click is first processed by <code>document.body</code>, then <code>input</code>:</p>
<p></p><div id="highlighter_206422" class="syntaxhighlighter  htmlscript"><div class="bar"><div class="toolbar"><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_206422_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_206422" menu="false" src="/modules/syntaxhighlighter/sh/scripts/clipboard.swf"></div><a href="http://javascript.info/tutorial/events-and-timing-depth#viewSource" title="show clean source in new window" class="item viewSource" style="width: 16px; height: 16px;">show clean source in new window</a><a href="http://javascript.info/tutorial/events-and-timing-depth#noList" title="Hide/show line numbers" class="item noList" style="width: 16px; height: 16px;">Hide/show line numbers</a><a href="http://javascript.info/tutorial/events-and-timing-depth#printSource" title="print highlighted code" class="item printSource" style="width: 16px; height: 16px;">print highlighted code</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">input</code> <code class="htmlscript color1">type</code><code class="htmlscript plain">=</code><code class="htmlscript string">"button"</code> <code class="htmlscript color1">value</code><code class="htmlscript plain">=</code><code class="htmlscript string">'click'</code><code class="htmlscript plain">&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="htmlscript script">&lt;script&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="htmlscript keyword">var</code> <code class="htmlscript plain">input = document.getElementsByTagName(</code><code class="htmlscript string">'input'</code><code class="htmlscript plain">)[0]</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="htmlscript plain">input.onclick = </code><code class="htmlscript keyword">function</code><code class="htmlscript plain">() {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="htmlscript plain">setTimeout(</code><code class="htmlscript keyword">function</code><code class="htmlscript plain">() { </code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">input.value +=</code><code class="htmlscript string">' input'</code>&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="htmlscript plain">}, 0)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="htmlscript plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="htmlscript plain">document.body.onclick = </code><code class="htmlscript keyword">function</code><code class="htmlscript plain">() {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="htmlscript plain">input.value += </code><code class="htmlscript string">' body'</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="htmlscript plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="htmlscript script">&lt;/script&gt;</code></td></tr></tbody></table></div></div><iframe class="src-frame" id="src-frame-highlighter_206422" name="src-frame-highlighter_206422" frameborder="0" width="640px" style="width: 640px; height: 50px;"></iframe></div><p></p>
<p>Note: <code>setTimeout</code> uses <code>input.value</code>, not <code>this.value</code>, because <code>this = window</code> at the time of call.</p>
<h3 id="give-the-browser-time-for-job">Give the browser time for job</h3>
<p>Most of time, we can handle an event prior to browser default action. But sometimes we want the <em>result</em> of the browser action to process it.</p>
<p>For example, let’s create an input which uppercases it’s text:</p>
<p></p><div id="highlighter_919272" class="syntaxhighlighter  htmlscript"><div class="bar"><div class="toolbar"><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_919272_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_919272" menu="false" src="/modules/syntaxhighlighter/sh/scripts/clipboard.swf"></div><a href="http://javascript.info/tutorial/events-and-timing-depth#viewSource" title="show clean source in new window" class="item viewSource" style="width: 16px; height: 16px;">show clean source in new window</a><a href="http://javascript.info/tutorial/events-and-timing-depth#noList" title="Hide/show line numbers" class="item noList" style="width: 16px; height: 16px;">Hide/show line numbers</a><a href="http://javascript.info/tutorial/events-and-timing-depth#printSource" title="print highlighted code" class="item printSource" style="width: 16px; height: 16px;">print highlighted code</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">input</code> <code class="htmlscript color1">id</code><code class="htmlscript plain">=</code><code class="htmlscript string">'my'</code> <code class="htmlscript color1">type</code><code class="htmlscript plain">=</code><code class="htmlscript string">"text"</code><code class="htmlscript plain">&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="htmlscript script">&lt;script&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="htmlscript plain">document.getElementById(</code><code class="htmlscript string">'my'</code><code class="htmlscript plain">).onkeypress = </code><code class="htmlscript keyword">function</code><code class="htmlscript plain">(event) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="htmlscript keyword">this</code><code class="htmlscript plain">.value = </code><code class="htmlscript keyword">this</code><code class="htmlscript plain">.value.toUpperCase()</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="htmlscript plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>6</code></td><td class="content"><code class="htmlscript script">&lt;/script&gt;</code></td></tr></tbody></table></div></div></div><p></p>
<p>Type something to try it: <input id="my" type="text"></p>
<script>
document.getElementById('my').onkeypress = function(event) { 
  this.value = this.value.toUpperCase()
}
</script>
See? It doesn't work! The value is uppercased *except last char*, because the browser appends the char *after* `keypress` is processed.
Of course, we could switch to `keyup`, it has full value. But then the char would show up as lowercased, and get uppercased on key release. That looks weird.
Type to see (`keyup`): <input id="my2" type="text">
<script>
document.getElementById('my2').onkeyup = function(event) { 
  this.value = this.value.toUpperCase()
}
</script>
The solution is to use `keypress`, but apply uppercase in a timeout:
<div id="highlighter_418203" class="syntaxhighlighter  htmlscript"><div class="bar"><div class="toolbar"><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_418203_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_418203" menu="false" src="/modules/syntaxhighlighter/sh/scripts/clipboard.swf"></div><a href="http://javascript.info/tutorial/events-and-timing-depth#viewSource" title="show clean source in new window" class="item viewSource" style="width: 16px; height: 16px;">show clean source in new window</a><a href="http://javascript.info/tutorial/events-and-timing-depth#noList" title="Hide/show line numbers" class="item noList" style="width: 16px; height: 16px;">Hide/show line numbers</a><a href="http://javascript.info/tutorial/events-and-timing-depth#printSource" title="print highlighted code" class="item printSource" style="width: 16px; height: 16px;">print highlighted code</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">input</code> <code class="htmlscript color1">id</code><code class="htmlscript plain">=</code><code class="htmlscript string">'my-ok'</code> <code class="htmlscript color1">type</code><code class="htmlscript plain">=</code><code class="htmlscript string">"text"</code><code class="htmlscript plain">&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="htmlscript script">&lt;script&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="htmlscript plain">document.getElementById(</code><code class="htmlscript string">'my-ok'</code><code class="htmlscript plain">).onkeypress = </code><code class="htmlscript keyword">function</code><code class="htmlscript plain">() {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="htmlscript keyword">var</code> <code class="htmlscript plain">self = </code><code class="htmlscript keyword">this</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="htmlscript plain">setTimeout(</code><code class="htmlscript keyword">function</code><code class="htmlscript plain">() {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>6</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">self.value = self.value.toUpperCase()</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>7</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="htmlscript plain">}, 0)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>8</code></td><td class="content"><code class="htmlscript plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>9</code></td><td class="content"><code class="htmlscript script">&lt;/script&gt;</code></td></tr></tbody></table></div></div></div>
Now works at it should: <input id="my-ok" type="text">
<script>
document.getElementById('my-ok').onkeypress = function() {
  var self = this
  setTimeout(function() {
    self.value = self.value.toUpperCase()
  }, 0)
}
</script>
<p>The timeout executes <em>after</em> the char is appended, but soon enough to keep the delay invisible.</p>
<p></p><div class="summary"> <p><code>setTimeout(.., 0)</code> is applied to execute the action after browser processing and other handlers.</p>
</div><p></p>
<h2 id="synchronous-events">Synchronous events</h2>
<p>There are events which don’t use the event queue. They are called <em>synchronous events</em> and work immediately even when inside other handlers.</p>
<h3 id="dom-mutation-events-are-synchronous">DOM mutation events are synchronous.</h3>
<p>In the example below, the <code>onclick</code> handler changes an attribute of the link, which has a <code>DOMAttrModified(onpropertychange for IE)</code> listener.</p>
<p></p><div class="summary"> <p>Synchronous mutation events are processed immediately during <code>onclick</code>.</p>
</div><p></p>
<p>Click the link to see:<br>
</p><div id="highlighter_356212" class="syntaxhighlighter  htmlscript"><div class="bar"><div class="toolbar"><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_356212_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_356212" menu="false" src="/modules/syntaxhighlighter/sh/scripts/clipboard.swf"></div><a href="http://javascript.info/tutorial/events-and-timing-depth#viewSource" title="show clean source in new window" class="item viewSource" style="width: 16px; height: 16px;">show clean source in new window</a><a href="http://javascript.info/tutorial/events-and-timing-depth#noList" title="Hide/show line numbers" class="item noList" style="width: 16px; height: 16px;">Hide/show line numbers</a><a href="http://javascript.info/tutorial/events-and-timing-depth#printSource" title="print highlighted code" class="item printSource" style="width: 16px; height: 16px;">print highlighted code</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">a</code> <code class="htmlscript color1">href</code><code class="htmlscript plain">=</code><code class="htmlscript string">"#"</code><code class="htmlscript plain">&gt;Click me!&lt;/</code><code class="htmlscript keyword">a</code><code class="htmlscript plain">&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="htmlscript script">&lt;script&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="htmlscript keyword">var</code> <code class="htmlscript plain">a = document.body.children[0]</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="htmlscript plain">a.onclick = </code><code class="htmlscript keyword">function</code><code class="htmlscript plain">() {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="htmlscript plain">alert(</code><code class="htmlscript string">'in onlick'</code><code class="htmlscript plain">)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="htmlscript keyword">this</code><code class="htmlscript plain">.setAttribute(</code><code class="htmlscript string">'href'</code><code class="htmlscript plain">, </code><code class="htmlscript string">'lala'</code><code class="htmlscript plain">)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="htmlscript plain">alert(</code><code class="htmlscript string">'out onclick'</code><code class="htmlscript plain">)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="htmlscript keyword">return</code> <code class="htmlscript keyword">false</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="htmlscript plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="htmlscript keyword">function</code> <code class="htmlscript plain">onpropchange() {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="htmlscript plain">alert(</code><code class="htmlscript string">'onpropchange'</code><code class="htmlscript plain">)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="htmlscript plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content"><code class="htmlscript keyword">if</code> <code class="htmlscript plain">(a.addEventListener) { </code><code class="htmlscript comments">// FF, Opera</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="htmlscript plain">a.addEventListener(</code><code class="htmlscript string">'DOMAttrModified'</code><code class="htmlscript plain">, onpropchange, </code><code class="htmlscript keyword">false</code><code class="htmlscript plain">)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>19</code></td><td class="content"><code class="htmlscript plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>20</code></td><td class="content"><code class="htmlscript keyword">if</code> <code class="htmlscript plain">(a.attachEvent) { </code><code class="htmlscript comments">// IE </code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>21</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="htmlscript plain">a.attachEvent(</code><code class="htmlscript string">'onpropertychange'</code><code class="htmlscript plain">, onpropchange)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>22</code></td><td class="content"><code class="htmlscript plain">} </code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>23</code></td><td class="content"><code class="htmlscript script">&lt;/script&gt;</code></td></tr></tbody></table></div></div><iframe class="src-frame" id="src-frame-highlighter_356212" name="src-frame-highlighter_356212" frameborder="0" width="640px" style="width: 640px; height: 34px;"></iframe></div><p></p>
<p>The <code>click</code> processing order:</p>
<ol>
<li><code>alert('in onclick')</code> works.</li>
<li>The attribute is changed and the DOM mutation event is processed synchronously, immediately triggering <code>onchange</code>. It outputs <code>alert('onpropchange')</code>.</li>
<li>The rest of <code>onclick</code> executes, leading to <code>alert('out onclick')</code>.</li>
</ol>
<h3 id="nested-dom-events-are-synchronous">Nested DOM events are synchronous.</h3>
<p></p><div class="summary"> <p>There are methods which trigger an immediate event, like <code>elem.focus()</code>. These events are also processed in a synchronous manner.</p>
</div><p></p>
<p>Run the example below and click on the button. Notice that <code>onfocus</code><br>
doesn’t wait <code>onclick</code> to complete, it works immediately.</p>
<p></p><div id="highlighter_422185" class="syntaxhighlighter  htmlscript"><div class="bar"><div class="toolbar"><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_422185_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_422185" menu="false" src="/modules/syntaxhighlighter/sh/scripts/clipboard.swf"></div><a href="http://javascript.info/tutorial/events-and-timing-depth#viewSource" title="show clean source in new window" class="item viewSource" style="width: 16px; height: 16px;">show clean source in new window</a><a href="http://javascript.info/tutorial/events-and-timing-depth#noList" title="Hide/show line numbers" class="item noList" style="width: 16px; height: 16px;">Hide/show line numbers</a><a href="http://javascript.info/tutorial/events-and-timing-depth#printSource" title="print highlighted code" class="item printSource" style="width: 16px; height: 16px;">print highlighted code</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">input</code> <code class="htmlscript color1">type</code><code class="htmlscript plain">=</code><code class="htmlscript string">"button"</code> <code class="htmlscript color1">value</code><code class="htmlscript plain">=</code><code class="htmlscript string">"click me"</code><code class="htmlscript plain">&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">input</code> <code class="htmlscript color1">type</code><code class="htmlscript plain">=</code><code class="htmlscript string">"text"</code><code class="htmlscript plain">&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="htmlscript script">&lt;script&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="htmlscript keyword">var</code> <code class="htmlscript plain">button = document.body.children[0]</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="htmlscript keyword">var</code> <code class="htmlscript plain">text = document.body.children[1]</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="htmlscript plain">button.onclick = </code><code class="htmlscript keyword">function</code><code class="htmlscript plain">() {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">alert(</code><code class="htmlscript string">'in onclick'</code><code class="htmlscript plain">)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">text.focus()</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">alert(</code><code class="htmlscript string">'out onclick'</code><code class="htmlscript plain">)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="htmlscript plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="spaces">&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="htmlscript plain">text.onfocus = </code><code class="htmlscript keyword">function</code><code class="htmlscript plain">() {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">alert(</code><code class="htmlscript string">'onfocus'</code><code class="htmlscript plain">) </code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">text.onfocus = </code><code class="htmlscript keyword">null</code>&nbsp; <code class="htmlscript comments">//(*)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>19</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="htmlscript plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>20</code></td><td class="content"><code class="htmlscript script">&lt;/script&gt;</code></td></tr></tbody></table></div></div><iframe class="src-frame" id="src-frame-highlighter_422185" name="src-frame-highlighter_422185" frameborder="0" width="640px" style="width: 640px; height: 37px;"></iframe></div><p></p>
<p>In the example above, the alert order is in <code>onclick-&gt;focus-&gt;out onclick</code>, that clearly demonstrates the synchronous behavior.</p>
<p></p><div class="smart"> <p>The line labelled (<em>) is required, because <code>alert(message)</code> focuses on the message window. When it is disposed, the browser refocuses back. </em></p>
<p>So without () the <code>focus</code> would be triggered one extra time after the alert.</p>
</div><p></p>
<p></p><div class="summary"> <p>Events are also processed immediately when triggered from JavaScript by <code>dispatchEvent/fireEvent</code>.</p>
</div><p></p>
<p>Usually event handlers are executed one by one. So we assume that one handler finishes before the other starts.</p>
<p><strong>Synchronous events break this one-by-one rule, that may can cause side-effects.</strong></p>
<p>For example, the <code>onfocus</code> handler may assume that <code>onclick</code> has completed the job.</p>
<p>There are two ways to fix it:</p>
<ol>
<li>Move <code>text.focus()</code> to the end of the <code>onclick</code> code.</li>
<li>Wrap <code>text.focus()</code> into <code>setTimeout(.., 0)</code>:<br>
<div id="highlighter_6573" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_6573_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_6573" menu="false" src="/modules/syntaxhighlighter/sh/scripts/clipboard.swf"></div><a href="http://javascript.info/tutorial/events-and-timing-depth#viewSource" title="show clean source in new window" class="item viewSource" style="width: 16px; height: 16px;">show clean source in new window</a><a href="http://javascript.info/tutorial/events-and-timing-depth#noList" title="Hide/show line numbers" class="item noList" style="width: 16px; height: 16px;">Hide/show line numbers</a><a href="http://javascript.info/tutorial/events-and-timing-depth#printSource" title="print highlighted code" class="item printSource" style="width: 16px; height: 16px;">print highlighted code</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="plain">button.onclick = </code><code class="keyword">function</code><code class="plain">() {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">alert(1)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">setTimeout(</code><code class="keyword">function</code><code class="plain">() { text.focus() }, 0)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">alert(2)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div></div></div>
</li>
</ol>
<p>The concrete way is chosen according to your architecture.</p>
<h2 id="javascript-execution-and-rendering">JavaScript execution and rendering</h2>
<p></p><div class="summary"> <p>In most browsers, rendering and JavaScript use single event queue. It means that while JavaScript is running, no rendering occurs.</p>
</div><p></p>
<p>Check it on the demo below. <strong>When you press <code>run</code>, the browser may halt for some time</strong>, because it changes <code>div.style.backgroundColor</code> from #A00000 to #FFFFFF. </p>
<p>In most browsers, you see nothing until the script finishes, or until the browser pauses it with a message that ‘a script is running too long’.</p>
<p>The exception is Opera.</p>
<p></p><div id="highlighter_416016" class="syntaxhighlighter  htmlscript"><div class="bar"><div class="toolbar"><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_416016_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_416016" menu="false" src="/modules/syntaxhighlighter/sh/scripts/clipboard.swf"></div><a href="http://javascript.info/tutorial/events-and-timing-depth#viewSource" title="show clean source in new window" class="item viewSource" style="width: 16px; height: 16px;">show clean source in new window</a><a href="http://javascript.info/tutorial/events-and-timing-depth#noList" title="Hide/show line numbers" class="item noList" style="width: 16px; height: 16px;">Hide/show line numbers</a><a href="http://javascript.info/tutorial/events-and-timing-depth#printSource" title="print highlighted code" class="item printSource" style="width: 16px; height: 16px;">print highlighted code</a></div></div><div class="lines"><div class="run-toolbar"><input type="button" class="show-button" value="Show!"><a href="http://javascript.info/tutorial/events-and-timing-depth#" title="Switch to edit mode" class="edit-button">&nbsp;&nbsp;&nbsp;</a></div><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">div</code> <code class="htmlscript color1">style</code><code class="htmlscript plain">=</code><code class="htmlscript string">"width:200px;height:50px;background-color:#A00000"</code><code class="htmlscript plain">&gt;&lt;/</code><code class="htmlscript keyword">div</code><code class="htmlscript plain">&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">input</code> <code class="htmlscript color1">type</code><code class="htmlscript plain">=</code><code class="htmlscript string">"button"</code> <code class="htmlscript color1">onclick</code><code class="htmlscript plain">=</code><code class="htmlscript string">"run()"</code> <code class="htmlscript color1">value</code><code class="htmlscript plain">=</code><code class="htmlscript string">"run()"</code><code class="htmlscript plain">&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="htmlscript script">&lt;script&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="htmlscript keyword">function</code> <code class="htmlscript plain">run() {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="htmlscript keyword">var</code> <code class="htmlscript plain">div = document.getElementsByTagName(</code><code class="htmlscript string">'div'</code><code class="htmlscript plain">)[0]</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="htmlscript keyword">for</code><code class="htmlscript plain">(</code><code class="htmlscript keyword">var</code> <code class="htmlscript plain">i=0xA00000;i&lt;</code><code class="htmlscript keyword">0xFFFFFF</code><code class="htmlscript plain">;i++) {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript color1">div.style.backgroundColor</code> <code class="htmlscript plain">= </code><code class="htmlscript string">'#'</code><code class="htmlscript plain">+i.toString(16)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="htmlscript plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="htmlscript plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="htmlscript script">&lt;/script&gt;</code></td></tr></tbody></table></div></div></div><p></p>
<p>In Opera, you may notice <code>div</code> is redrawn. Not every change causes a repaint, probably because of Opera internal scheduling. That’s because event queues for rendering and JavaScript are different in this browser. </p>
<p>In other browsers the repaint is postponed until the JavaScript finishes. </p>
<p>Again, the implementation may be different, but generally <strong>the nodes are marked as “dirty” (want to be recalculated and redrawn), and repaint is queued</strong>. Or, the browser may just look for dirty nodes after every script and process them.</p>
<p></p><div class="smart"><div class="smart-header">Immediate reflow</div> <p>The browser contains many optimizations to speedup rendering and painting. Generally, it tries to postpone them until the script is finished, but some actions require nodes to be rerendered immediately.</p>
<p>For example:<br>
</p><div id="highlighter_763522" class="syntaxhighlighter nogutter  "><div class="lines"><div class="line alt1"><table><tbody><tr><td class="content"><code class="plain">elem.innerHTML = </code><code class="string">'new content'</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="content"><code class="plain">alert(elem.offsetHeight)&nbsp; </code><code class="comments">// &lt;-- rerenders elem to get offsetHeight</code></td></tr></tbody></table></div></div></div><p></p>
<p>In the case above, the browser has to perform relayouting to get the height.<br>
But it doesn’t have to repaint <code>elem</code> on the screen.</p>
<p>Sometimes other dependant nodes may get involved into calculations. This process is called <em>reflow</em> and may consume lots of resources if script causes it often.</p>
<p>Surely, there’s much more to talk about rendering. It will be covered by a separate article [todo].</p>
</div><p></p>
<h2 id="modal-and-synchronous-calls">Modal and synchronous calls</h2>
<p></p><div class="summary"> <p>Modal and synchronous calls like <code>alert</code> pause the JavaScript thread.</p>
<p>That causes related activities to freeze.</p>
</div><p></p>
<p>The example below demonstrates it.</p>
<ol>
<li>Press “Run”. The <code>setInterval</code>-based animation will start and and <code>alert</code> button will appear.</li>
<li>Press the button, note that the animation stops.</li>
</ol>
<p><input type="button" onclick="alert(&#39;Hello!&#39;)" value="alert(&#39;Hello!&#39;)  [ main window ]"><br>
</p><div id="highlighter_367188" class="syntaxhighlighter  htmlscript"><div class="bar"><div class="toolbar"><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_367188_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_367188" menu="false" src="/modules/syntaxhighlighter/sh/scripts/clipboard.swf"></div><a href="http://javascript.info/tutorial/events-and-timing-depth#viewSource" title="show clean source in new window" class="item viewSource" style="width: 16px; height: 16px;">show clean source in new window</a><a href="http://javascript.info/tutorial/events-and-timing-depth#noList" title="Hide/show line numbers" class="item noList" style="width: 16px; height: 16px;">Hide/show line numbers</a><a href="http://javascript.info/tutorial/events-and-timing-depth#printSource" title="print highlighted code" class="item printSource" style="width: 16px; height: 16px;">print highlighted code</a></div></div><div class="lines"><div class="run-toolbar"><input type="button" class="show-button" value="Show!"><a href="http://javascript.info/tutorial/events-and-timing-depth#" title="Switch to edit mode" class="edit-button">&nbsp;&nbsp;&nbsp;</a></div><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">div</code> <code class="htmlscript color1">style</code><code class="htmlscript plain">=</code><code class="htmlscript string">"height:20px;width:0px;background-color:green"</code><code class="htmlscript plain">&gt;&lt;/</code><code class="htmlscript keyword">div</code><code class="htmlscript plain">&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="htmlscript script">&lt;script&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="htmlscript keyword">var</code> <code class="htmlscript plain">timer = setInterval(</code><code class="htmlscript keyword">function</code><code class="htmlscript plain">() {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="htmlscript keyword">var</code> <code class="htmlscript plain">style = document.getElementsByTagName(</code><code class="htmlscript string">'div'</code><code class="htmlscript plain">)[0].style</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="htmlscript plain">style.width = (parseInt(style.width)+2)%400 + </code><code class="htmlscript string">'px'</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="htmlscript plain">}, 30)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="htmlscript script">&lt;/script&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">input</code> <code class="htmlscript color1">type</code><code class="htmlscript plain">=</code><code class="htmlscript string">"button"</code> <code class="htmlscript color1">onclick</code><code class="htmlscript plain">=</code><code class="htmlscript string">"alert('Hello!')"</code> <code class="htmlscript color1">value</code><code class="htmlscript plain">=</code><code class="htmlscript string">"alert('Hello!')&nbsp; [ iframe ]"</code><code class="htmlscript plain">&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">input</code> <code class="htmlscript color1">type</code><code class="htmlscript plain">=</code><code class="htmlscript string">"button"</code> <code class="htmlscript color1">onclick</code><code class="htmlscript plain">=</code><code class="htmlscript string">"clearInterval(timer)"</code> <code class="htmlscript color1">value</code><code class="htmlscript plain">=</code><code class="htmlscript string">"clearInterval(timer)"</code><code class="htmlscript plain">&gt;</code></td></tr></tbody></table></div></div></div><p></p>
<p>When you press <code>alert('Hello!')</code>, the <code>alert</code> blocks JavaScript execution and blocks the whole UI thread. That’s how <code>alert</code>, <code>confirm</code> and <code>prompt</code> work. And there is only one thread. So, <strong><code>setTimeout/setInterval</code> can’t execute while the thread is blocked.</strong> </p>
<h3 id="opera-iframes-exception">Opera: <code>iframes</code> exception.</h3>
<p></p><div class="summary"> <p>Usually, <code>iframes</code> run in the same thread with the page. </p>
</div><p></p>
<p>But there is an exception called Opera. <strong>Run the example above in Opera</strong> and press alert in the <u>main window</u>. The iframe animation will continue!<br>
That’s because the example is actually running in an iframe.</p>
<p>Other browsers use single thread for whole tab, so the iframe animation is paused there.</p>
<h2 id="script-taking-too-long-and-heavy-jobs">Script taking too long and heavy jobs</h2>
<p>JavaScript can be heavy. </p>
<p>In this case, the browser may hangup for a moment or come with a warning “Script is taking too long”.</p>
<p>We’d want to evade that. It can be done by split the job into parts which get scheduled after each other.</p>
<p>Then there is a “free time” for the browser to respond between parts. It is can render and react on other events. Both the visitor and the browser are happy.</p>
<p>The background color in the example below is changed once per tick. So the browser has the time to render it, and there are no hangups. Changes are applied incrementally.</p>
<p>Press the run button on the example to start.<br>
</p><div id="highlighter_600690" class="syntaxhighlighter  htmlscript"><div class="bar"><div class="toolbar"><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_600690_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_600690" menu="false" src="/modules/syntaxhighlighter/sh/scripts/clipboard.swf"></div><a href="http://javascript.info/tutorial/events-and-timing-depth#viewSource" title="show clean source in new window" class="item viewSource" style="width: 16px; height: 16px;">show clean source in new window</a><a href="http://javascript.info/tutorial/events-and-timing-depth#noList" title="Hide/show line numbers" class="item noList" style="width: 16px; height: 16px;">Hide/show line numbers</a><a href="http://javascript.info/tutorial/events-and-timing-depth#printSource" title="print highlighted code" class="item printSource" style="width: 16px; height: 16px;">print highlighted code</a></div></div><div class="lines"><div class="run-toolbar"><input type="button" class="show-button" value="Show!"><a href="http://javascript.info/tutorial/events-and-timing-depth#" title="Switch to edit mode" class="edit-button">&nbsp;&nbsp;&nbsp;</a></div><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">div</code> <code class="htmlscript color1">style</code><code class="htmlscript plain">=</code><code class="htmlscript string">"width:200px;height:50px;background-color:#100"</code><code class="htmlscript plain">&gt;&lt;/</code><code class="htmlscript keyword">div</code><code class="htmlscript plain">&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">input</code> <code class="htmlscript color1">type</code><code class="htmlscript plain">=</code><code class="htmlscript string">"button"</code> <code class="htmlscript color1">onclick</code><code class="htmlscript plain">=</code><code class="htmlscript string">"run()"</code> <code class="htmlscript color1">value</code><code class="htmlscript plain">=</code><code class="htmlscript string">"run()"</code><code class="htmlscript plain">&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">input</code> <code class="htmlscript color1">type</code><code class="htmlscript plain">=</code><code class="htmlscript string">"button"</code> <code class="htmlscript color1">onclick</code><code class="htmlscript plain">=</code><code class="htmlscript string">"stop()"</code> <code class="htmlscript color1">value</code><code class="htmlscript plain">=</code><code class="htmlscript string">"stop()"</code><code class="htmlscript plain">&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="htmlscript script">&lt;script&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="htmlscript keyword">var</code> <code class="htmlscript plain">timer</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="htmlscript keyword">function</code> <code class="htmlscript plain">run() {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="htmlscript keyword">var</code> <code class="htmlscript plain">div = document.getElementsByTagName(</code><code class="htmlscript string">'div'</code><code class="htmlscript plain">)[0]</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="htmlscript keyword">var</code> <code class="htmlscript plain">i=0x100000</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="htmlscript keyword">function</code> <code class="htmlscript plain">func() { </code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">timer = setTimeout(func, 0)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">div.style.backgroundColor = </code><code class="htmlscript string">'#'</code><code class="htmlscript plain">+i.toString(16)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript keyword">if</code> <code class="htmlscript plain">(i++ == 0xFFFFFF) stop()</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="htmlscript plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1 highlighted"><table><tbody><tr><td class="number"><code>19</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="htmlscript plain">timer = setTimeout(func, 0)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>20</code></td><td class="content"><code class="htmlscript plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>21</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>22</code></td><td class="content"><code class="htmlscript keyword">function</code> <code class="htmlscript plain">stop() {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>23</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="htmlscript plain">clearInterval(timer)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>24</code></td><td class="content"><code class="htmlscript plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>25</code></td><td class="content"><code class="htmlscript script">&lt;/script&gt;</code></td></tr></tbody></table></div></div></div><p></p>
<p>The internal order:</p>
<ol>
<li><code>setTimeout</code> appends the <code>func</code> call to the event queue.</li>
<li>The new call is scheduled on the next tick.</li>
<li>The func executes and changes the <code>div</code> which appends a repaint request to the queue.</li>
<li>The function finishes. The browser takes the next event from the queue which is repaint and executes it. Then it waits the next tick to execute one more <code>func</code> call (see step 2).</li>
<li>Repeated until <code>stop()</code></li>
</ol>
<p>A delay may be increased from 0 to 100 ms, depending on your needs. The longer delay leads to less CPU load.</p>
<p></p><div class="smart"><div class="smart-header">Evade the 'script is running for too long' warning</div> <p>As an important side-effect, splitting the long job into parts which are executed by <code>setTimeout</code> helps to fix browser hangups and evade warnings.</p>
<p>For example, modern syntax highlighters employ such technique. When a visitor opens a large text, they highlight a part of it then call something like <code>setTimeout(highlightNext, 50)</code> which highlights the next part etc.</p>
<p>It would hangup otherwise, because the syntax highlighting takes time.</p>
</div><p></p>
<h2 id="summary">Summary</h2>
<p>Most browsers use single thread for UI and JavaScript, which is blocked by synchronous calls. So, JavaScript execution blocks the rendering.</p>
<p>Events are processed asynchronously with the exception of DOM events.</p>
<p>The <code>setTimeout(..,0)</code> trick is very useful. It allows to:</p>
<ul>
<li>Let the browser render current changes.</li>
<li>Evade the “script is running too long” warning.</li>
<li>Change the execution flow.</li>
</ul>
<p>Opera is special in many places when it comes to timeouts and threading.</p>
<div id="book-navigation-246" class="book-navigation">
<div class="page-links clear-block">
<a href="http://javascript.info/tutorial/settimeout-setinterval" class="page-previous" title="Go to previous page">‹ Understanding timers: setTimeout and setInterval </a>
<a title="Go to next page" class="page-next" href="http://javascript.info/tutorial/popup-windows">Popup windows ›</a>
</div>
</div>
</div>
<div class="see-also-header">See also:</div><ul class="see-also-links"><li><a href="http://dev.opera.com/articles/view/timing-and-synchronization-in-javascript/">http://dev.opera.com/articles/view/timing-and-synchronization-in-javascript/</a></li></ul>
<div style="clear:both"></div>
</div>
 </div>
 
 </div>
 
<div class="column-3"> <div class="block block-book" id="block-book-0">
<h2 class="title"><a href="http://javascript.info/root" class="book-title">Tutorial</a></h2> <div class="content"><ul class="menu"><li class="first dhtml-menu  collapsed start-collapsed"><a href="http://javascript.info/tutorial/basics" id="dhtml_menu-201">JavaScript: from the Ground to Closures</a><ul class="menu"><li class="leaf fake-leaf"><a href="http://javascript.info/tutorial/basics" id="dhtml_menu-201">JavaScript: from the Ground to Closures</a></li><li class="first dhtml-menu  collapsed start-collapsed"><a href="http://javascript.info/tutorial/javascript-and-related-technologies" id="dhtml_menu-552">Javascript and related technologies</a><ul class="menu"><li class="leaf fake-leaf"><a href="http://javascript.info/tutorial/javascript-and-related-technologies" id="dhtml_menu-552">Javascript and related technologies</a></li><li class="leaf first dhtml-menu "><a href="http://javascript.info/tutorial/overview" id="dhtml_menu-207">Overview: JavaScript, Flash, Java, Silverlight and ActiveX</a></li>
<li class="leaf last dhtml-menu "><a href="http://javascript.info/tutorial/pre-coding" id="dhtml_menu-474">Pre-coding tips </a></li>
</ul></li>
<li class="dhtml-menu  collapsed start-collapsed"><a href="http://javascript.info/tutorial/first-steps" id="dhtml_menu-553">First Steps</a><ul class="menu"><li class="leaf fake-leaf"><a href="http://javascript.info/tutorial/first-steps" id="dhtml_menu-553">First Steps</a></li><li class="leaf first dhtml-menu "><a href="http://javascript.info/tutorial/setup-your-environment" id="dhtml_menu-233">Setup your environment</a></li>
<li class="leaf  dhtml-menu "><a href="http://javascript.info/tutorial/hello-world" id="dhtml_menu-234">Hello, World!</a></li>
<li class="leaf  dhtml-menu "><a href="http://javascript.info/tutorial/variables-and-statements" id="dhtml_menu-235">Variables and statements</a></li>
<li class="leaf  dhtml-menu "><a href="http://javascript.info/tutorial/development" id="dhtml_menu-587">Browser Developer's Tools</a></li>
<li class="leaf  dhtml-menu "><a href="http://javascript.info/tutorial/user-interaction-alert-prompt-and-confirm" id="dhtml_menu-476">User interaction: alert, prompt and confirm</a></li>
<li class="last dhtml-menu  collapsed start-collapsed"><a href="http://javascript.info/tutorial/operators-and-constructs" id="dhtml_menu-271">Operators and constructs</a><ul class="menu"><li class="leaf fake-leaf"><a href="http://javascript.info/tutorial/operators-and-constructs" id="dhtml_menu-271">Operators and constructs</a></li><li class="leaf first dhtml-menu "><a href="http://javascript.info/tutorial/operators" id="dhtml_menu-436">Operators</a></li>
<li class="leaf  dhtml-menu "><a href="http://javascript.info/tutorial/comparison-operators-ifelse" id="dhtml_menu-437">Comparison operators, if..else</a></li>
<li class="leaf last dhtml-menu "><a href="http://javascript.info/tutorial/loops-and-switch" id="dhtml_menu-438">Loops and switch</a></li>
</ul></li>
</ul></li>
<li class="leaf  dhtml-menu "><a href="http://javascript.info/tutorial/functions-declarations-and-expressions" id="dhtml_menu-304">Functions: declarations and expressions</a></li>
<li class="dhtml-menu  collapsed start-collapsed"><a href="http://javascript.info/tutorial/mastering-data-types" id="dhtml_menu-238">Mastering data types</a><ul class="menu"><li class="leaf fake-leaf"><a href="http://javascript.info/tutorial/mastering-data-types" id="dhtml_menu-238">Mastering data types</a></li><li class="leaf first dhtml-menu "><a href="http://javascript.info/tutorial/string" id="dhtml_menu-262">String</a></li>
<li class="leaf  dhtml-menu "><a href="http://javascript.info/tutorial/number-math" id="dhtml_menu-320">Number, Math</a></li>
<li class="leaf  dhtml-menu "><a href="http://javascript.info/tutorial/objects" id="dhtml_menu-322">Objects</a></li>
<li class="leaf  dhtml-menu "><a href="http://javascript.info/tutorial/array" id="dhtml_menu-321">Array</a></li>
<li class="leaf last dhtml-menu "><a href="http://javascript.info/tutorial/object-conversion" id="dhtml_menu-325">Conversion, toString and valueOf</a></li>
</ul></li>
<li class="leaf  dhtml-menu "><a href="http://javascript.info/tutorial/this" id="dhtml_menu-631">Four scents of "this"</a></li>
<li class="leaf  dhtml-menu "><a href="http://javascript.info/tutorial/type-detection" id="dhtml_menu-582">Type detection </a></li>
<li class="leaf  dhtml-menu "><a href="http://javascript.info/tutorial/arguments" id="dhtml_menu-554">Function arguments</a></li>
<li class="leaf  dhtml-menu "><a href="http://javascript.info/tutorial/static-variables-methods-decorators" id="dhtml_menu-577">Static variables and methods</a></li>
<li class="dhtml-menu  collapsed start-collapsed"><a href="http://javascript.info/tutorial/advanced-functions" id="dhtml_menu-289">Scopes and Closures</a><ul class="menu"><li class="leaf fake-leaf"><a href="http://javascript.info/tutorial/advanced-functions" id="dhtml_menu-289">Scopes and Closures</a></li><li class="leaf first dhtml-menu "><a href="http://javascript.info/tutorial/initialization" id="dhtml_menu-323">Initialization of functions and variables</a></li>
<li class="leaf  dhtml-menu "><a href="http://javascript.info/tutorial/closures" id="dhtml_menu-621">Closures</a></li>
<li class="leaf last dhtml-menu "><a href="http://javascript.info/tutorial/with-operator" id="dhtml_menu-565">The "with" operator</a></li>
</ul></li>
<li class="leaf last dhtml-menu "><a href="http://javascript.info/tutorial/decorators" id="dhtml_menu-633">Decorators</a></li>
</ul></li>
<li class="dhtml-menu  collapsed start-collapsed"><a href="http://javascript.info/tutorial/browser" id="dhtml_menu-326">Document and Events</a><ul class="menu"><li class="leaf fake-leaf"><a href="http://javascript.info/tutorial/browser" id="dhtml_menu-326">Document and Events</a></li><li class="leaf first dhtml-menu "><a href="http://javascript.info/tutorial/adding-script-html" id="dhtml_menu-574">Adding a script to HTML</a></li>
<li class="leaf  dhtml-menu "><a href="http://javascript.info/tutorial/browser-environment" id="dhtml_menu-329">Browser environment</a></li>
<li class="dhtml-menu  collapsed start-collapsed"><a href="http://javascript.info/tutorial/dom" id="dhtml_menu-428">DOM </a><ul class="menu"><li class="leaf fake-leaf"><a href="http://javascript.info/tutorial/dom" id="dhtml_menu-428">DOM </a></li><li class="leaf first dhtml-menu "><a href="http://javascript.info/tutorial/dom-nodes" id="dhtml_menu-457">DOM Nodes</a></li>
<li class="leaf  dhtml-menu "><a href="http://javascript.info/tutorial/traversing-dom" id="dhtml_menu-459">Traversing the DOM</a></li>
<li class="leaf  dhtml-menu "><a href="http://javascript.info/tutorial/basic-dom-node-properties" id="dhtml_menu-460">Basic DOM Node properties</a></li>
<li class="leaf  dhtml-menu "><a href="http://javascript.info/tutorial/attributes-and-custom-properties" id="dhtml_menu-462">Attributes and custom properties</a></li>
<li class="leaf  dhtml-menu "><a href="http://javascript.info/tutorial/modifying-document" id="dhtml_menu-465">Modifying the document</a></li>
<li class="leaf  dhtml-menu "><a href="http://javascript.info/tutorial/document-write" id="dhtml_menu-521">Using document.write</a></li>
<li class="leaf  dhtml-menu "><a href="http://javascript.info/tutorial/searching-elements-dom" id="dhtml_menu-463">Searching elements in DOM</a></li>
<li class="leaf last dhtml-menu "><a href="http://javascript.info/tutorial/more-references-forms-and-tables" id="dhtml_menu-600">More references in forms and tables</a></li>
</ul></li>
<li class="dhtml-menu  collapsed start-collapsed"><a href="http://javascript.info/tutorial/view-and-position" id="dhtml_menu-478">View and position</a><ul class="menu"><li class="leaf fake-leaf"><a href="http://javascript.info/tutorial/view-and-position" id="dhtml_menu-478">View and position</a></li><li class="leaf first dhtml-menu "><a href="http://javascript.info/tutorial/styles-and-classes-getcomputedstyle" id="dhtml_menu-467">Styles and classes, getComputedStyle</a></li>
<li class="leaf  dhtml-menu "><a href="http://javascript.info/tutorial/re-introducing-css-positioning" id="dhtml_menu-477">Re-introducing CSS positioning</a></li>
<li class="leaf  dhtml-menu "><a href="http://javascript.info/tutorial/metrics" id="dhtml_menu-466">Metrics</a></li>
<li class="leaf last dhtml-menu "><a href="http://javascript.info/tutorial/coordinates" id="dhtml_menu-604">Coordinates</a></li>
</ul></li>
<li class="last dhtml-menu  collapsed start-collapsed"><a href="http://javascript.info/tutorial/events" id="dhtml_menu-480">Events</a><ul class="menu"><li class="leaf fake-leaf"><a href="http://javascript.info/tutorial/events" id="dhtml_menu-480">Events</a></li><li class="leaf first dhtml-menu "><a href="http://javascript.info/tutorial/introduction-browser-events" id="dhtml_menu-328">Introduction into browser events</a></li>
<li class="leaf  dhtml-menu "><a href="http://javascript.info/tutorial/obtaining-event-object" id="dhtml_menu-601">Obtaining the event object</a></li>
<li class="leaf  dhtml-menu "><a href="http://javascript.info/tutorial/bubbling-and-capturing" id="dhtml_menu-602">Bubbling and capturing</a></li>
<li class="leaf  dhtml-menu "><a href="http://javascript.info/tutorial/default-browser-action" id="dhtml_menu-603">The default browser action</a></li>
<li class="leaf  dhtml-menu "><a href="http://javascript.info/tutorial/event-delegation" id="dhtml_menu-496">Event delegation </a></li>
<li class="leaf  dhtml-menu "><a href="http://javascript.info/tutorial/mouse-events" id="dhtml_menu-482">Mouse events</a></li>
<li class="leaf  dhtml-menu "><a href="http://javascript.info/tutorial/focus-blur" id="dhtml_menu-495">Focus/Blur: methods and events</a></li>
<li class="leaf last dhtml-menu "><a href="http://javascript.info/tutorial/keyboard-events" id="dhtml_menu-497">Keyboard events</a></li>
</ul></li>
</ul></li>
<li class="dhtml-menu  collapsed start-collapsed"><a href="http://javascript.info/tutorial/object-oriented-programming" id="dhtml_menu-566">Object Oriented Programming</a><ul class="menu"><li class="leaf fake-leaf"><a href="http://javascript.info/tutorial/object-oriented-programming" id="dhtml_menu-566">Object Oriented Programming</a></li><li class="leaf first dhtml-menu "><a href="http://javascript.info/tutorial/inheritance" id="dhtml_menu-598">Prototypal inheritance </a></li>
<li class="leaf  dhtml-menu "><a href="http://javascript.info/tutorial/native-prototypes" id="dhtml_menu-626">Extending Natives</a></li>
<li class="leaf  dhtml-menu "><a href="http://javascript.info/tutorial/constructor" id="dhtml_menu-625">The "constructor" property</a></li>
<li class="leaf  dhtml-menu "><a href="http://javascript.info/tutorial/instanceof" id="dhtml_menu-624">The "instanceof" operator</a></li>
<li class="dhtml-menu  collapsed start-collapsed"><a href="http://javascript.info/tutorial/oop" id="dhtml_menu-614">OOP patterns</a><ul class="menu"><li class="leaf fake-leaf"><a href="http://javascript.info/tutorial/oop" id="dhtml_menu-614">OOP patterns</a></li><li class="leaf first dhtml-menu "><a href="http://javascript.info/tutorial/oop-concepts" id="dhtml_menu-488">General concepts </a></li>
<li class="leaf  dhtml-menu "><a href="http://javascript.info/tutorial/pseudo-classical-pattern" id="dhtml_menu-613">Pseudo-classical pattern</a></li>
<li class="leaf  dhtml-menu "><a href="http://javascript.info/tutorial/all-one-constructor-pattern" id="dhtml_menu-615">All-in-one constructor pattern</a></li>
<li class="leaf last dhtml-menu "><a href="http://javascript.info/tutorial/factory-constructor-pattern" id="dhtml_menu-617">Factory constructor pattern</a></li>
</ul></li>
<li class="leaf  dhtml-menu "><a href="http://javascript.info/tutorial/binding" id="dhtml_menu-616">Early and Late Binding</a></li>
<li class="leaf last dhtml-menu "><a href="http://javascript.info/tutorial/exceptions" id="dhtml_menu-561">Exceptions</a></li>
</ul></li>
<li class="expanded  dhtml-menu  active-trail"><a href="http://javascript.info/tutorial/timing" id="dhtml_menu-609">Timing</a><ul class="menu"><li class="leaf fake-leaf"><a href="http://javascript.info/tutorial/timing" id="dhtml_menu-609">Timing</a></li><li class="leaf first dhtml-menu "><a href="http://javascript.info/tutorial/datetime-functions" id="dhtml_menu-522">Date/Time functions</a></li>
<li class="leaf  dhtml-menu "><a href="http://javascript.info/tutorial/settimeout-setinterval" id="dhtml_menu-567">Understanding timers: setTimeout and setInterval </a></li>
<li class="leaf last dhtml-menu  active-trail"><a href="./Javascript is single-threaded_files/events-and-timing-depth.html" id="dhtml_menu-568" class="active">Events and timing in-depth 深入事件和定时机制</a></li>
</ul></li>
<li class="dhtml-menu  collapsed start-collapsed"><a href="http://javascript.info/tutorial/frames-and-windows" id="dhtml_menu-555">Frames and windows</a><ul class="menu"><li class="leaf fake-leaf"><a href="http://javascript.info/tutorial/frames-and-windows" id="dhtml_menu-555">Frames and windows</a></li><li class="leaf first dhtml-menu "><a href="http://javascript.info/tutorial/popup-windows" id="dhtml_menu-557">Popup windows</a></li>
<li class="leaf  dhtml-menu "><a href="http://javascript.info/tutorial/browser-window-properties-and-methods" id="dhtml_menu-560">Browser window properties and methods</a></li>
<li class="leaf  dhtml-menu "><a href="http://javascript.info/tutorial/focus" id="dhtml_menu-563">Focus/blur methods and events</a></li>
<li class="leaf  dhtml-menu "><a href="http://javascript.info/tutorial/frames-and-iframes" id="dhtml_menu-556">Frames and iframes</a></li>
<li class="leaf  dhtml-menu "><a href="http://javascript.info/tutorial/same-origin-security-policy" id="dhtml_menu-558">The "Same Origin" security policy</a></li>
<li class="leaf  dhtml-menu "><a href="http://javascript.info/tutorial/cross-window-messaging-with-postmessage" id="dhtml_menu-559">Cross-window messaging with postMessage</a></li>
<li class="leaf last dhtml-menu "><a href="http://javascript.info/tutorial/clickjacking" id="dhtml_menu-564">The Clickjacking attack, X-Frame-Options</a></li>
</ul></li>
<li class="dhtml-menu  collapsed start-collapsed"><a href="http://javascript.info/tutorial/regular-expressions-javascript" id="dhtml_menu-585">Regular expressions in JavaScript</a><ul class="menu"><li class="leaf fake-leaf"><a href="http://javascript.info/tutorial/regular-expressions-javascript" id="dhtml_menu-585">Regular expressions in JavaScript</a></li><li class="leaf first dhtml-menu "><a href="http://javascript.info/tutorial/regexp-introduction" id="dhtml_menu-589">Introduction</a></li>
<li class="leaf  dhtml-menu "><a href="http://javascript.info/tutorial/character-classes" id="dhtml_menu-584">Character classes</a></li>
<li class="leaf  dhtml-menu "><a href="http://javascript.info/tutorial/special-characters" id="dhtml_menu-586">Special characters</a></li>
<li class="leaf  dhtml-menu "><a href="http://javascript.info/tutorial/flags" id="dhtml_menu-590">Flags</a></li>
<li class="leaf  dhtml-menu "><a href="http://javascript.info/tutorial/character-sets-and-ranges" id="dhtml_menu-588">Character sets and ranges</a></li>
<li class="leaf  dhtml-menu "><a href="http://javascript.info/tutorial/numeric-quantifiers" id="dhtml_menu-591">Numeric Quantifiers</a></li>
<li class="leaf  dhtml-menu "><a href="http://javascript.info/tutorial/quantifiers-and" id="dhtml_menu-618">Quantifiers +, * and ?</a></li>
<li class="leaf  dhtml-menu "><a href="http://javascript.info/tutorial/greedy-and-lazy" id="dhtml_menu-592">Greedy and Lazy</a></li>
<li class="leaf  dhtml-menu "><a href="http://javascript.info/tutorial/ahchors-and-multiline-mode" id="dhtml_menu-593">Ahchors and multiline mode</a></li>
<li class="leaf  dhtml-menu "><a href="http://javascript.info/tutorial/word-boundary" id="dhtml_menu-619">Word boundary</a></li>
<li class="leaf  dhtml-menu "><a href="http://javascript.info/tutorial/infinite-backtracking-problem" id="dhtml_menu-628">Infinite backtracking problem</a></li>
<li class="leaf  dhtml-menu "><a href="http://javascript.info/tutorial/groups" id="dhtml_menu-595">Groups</a></li>
<li class="leaf  dhtml-menu "><a href="http://javascript.info/tutorial/alternation" id="dhtml_menu-594">Alternation </a></li>
<li class="leaf  dhtml-menu "><a href="http://javascript.info/tutorial/regular-expressions-methods" id="dhtml_menu-620">Regular expressions methods </a></li>
<li class="leaf last dhtml-menu "><a href="http://javascript.info/tutorial/practice" id="dhtml_menu-627">Practice </a></li>
</ul></li>
<li class="last dhtml-menu  collapsed start-collapsed"><a href="http://javascript.info/tutorial/advanced-and-extra-stuff" id="dhtml_menu-623">Advanced and Extra stuff</a><ul class="menu"><li class="leaf fake-leaf"><a href="http://javascript.info/tutorial/advanced-and-extra-stuff" id="dhtml_menu-623">Advanced and Extra stuff</a></li><li class="leaf first dhtml-menu "><a href="http://javascript.info/tutorial/onload-ondomcontentloaded" id="dhtml_menu-519">onLoad and onDOMContentLoaded</a></li>
<li class="leaf  dhtml-menu "><a href="http://javascript.info/tutorial/animation" id="dhtml_menu-605">Animation</a></li>
<li class="leaf last dhtml-menu "><a href="http://javascript.info/tutorial/memory-leaks" id="dhtml_menu-622">Memory leaks</a></li>
</ul></li>
</ul></div>
</div>
</div>
 
 
<div id="footer" class="clear-block">
<div class="clear-both">
<p>The content of this site is available under the terms of <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/deed">CC BY-NC-SA</a>. </p>
<p>© Ilya Kantor, 2011.</p>
<div id="tm" style="margin-top:5px;font-size:1.1em">"JavaScript™ is a registered trademark of Oracle corp. This site is not affiliated with Oracle corp.</div>
<div id="fb-root" class=" fb_reset"><script async="" src="./Javascript is single-threaded_files/all.js"></script><div style="position: absolute; top: -10000px; height: 0px; width: 0px;"><div></div></div><div style="position: absolute; top: -10000px; height: 0px; width: 0px;"><div><iframe name="fb_xdm_frame_http" frameborder="0" allowtransparency="true" allowfullscreen="true" scrolling="no" id="fb_xdm_frame_http" aria-hidden="true" title="Facebook Cross Domain Communication Frame" tabindex="-1" src="./Javascript is single-threaded_files/44OwK74u0Ie.html" style="border: none;"></iframe><iframe name="fb_xdm_frame_https" frameborder="0" allowtransparency="true" allowfullscreen="true" scrolling="no" id="fb_xdm_frame_https" aria-hidden="true" title="Facebook Cross Domain Communication Frame" tabindex="-1" src="./Javascript is single-threaded_files/44OwK74u0Ie(1).html" style="border: none;"></iframe></div></div></div><script type="text/javascript">
     window.fbAsyncInit = function() {
       FB.init({
         appId: "112959575461438",
         status: true, 
         cookie: true,
         xfbml: true,
         channelUrl: "http:\/\/javascript.info\/fb_social\/channel",
       });
       
       
       
         
     };
     (function() {
       var e = document.createElement('script'); 
       e.async = true;
       e.src = document.location.protocol + '//connect.facebook.net/en_US/all.js';
       document.getElementById('fb-root').appendChild(e);
     }());
  </script> </div>
</div>
 
<script>

    var _gaq = window._gaq = [];
    _gaq.push(["_addOrganic", "go.mail.ru","q"]);
    _gaq.push(["_addOrganic", "nova.rambler.ru","query"]);
    _gaq.push(["_addOrganic", "nigma.ru", "s"]);
    _gaq.push(["_addOrganic", "blogs.yandex.ru", "text", true]);
    _gaq.push(["_addOrganic", "webalta.ru", "q"]);
    _gaq.push(["_addOrganic", "aport.ru", "r"]);
    _gaq.push(["_addOrganic", "akavita.by", "z"]);
    _gaq.push(["_addOrganic", "meta.ua", "q"]);
    _gaq.push(["_addOrganic", "bigmir.net", "q"]);
    _gaq.push(["_addOrganic", "tut.by", "query"]);
    _gaq.push(["_addOrganic", "all.by", "query"]);
    _gaq.push(["_addOrganic", "i.ua", "q"]);
    _gaq.push(["_addOrganic", "online.ua", "q"]);
    _gaq.push(["_addOrganic", "a.ua", "s"]);
    _gaq.push(["_addOrganic", "ukr.net", "search_query"]);
    _gaq.push(["_addOrganic", "search.com.ua", "q"]);
    _gaq.push(["_addOrganic", "search.ua", "query"]);
    _gaq.push(["_addOrganic", "poisk.ru", "text"]);
    _gaq.push(["_addOrganic", "km.ru", "sq"]);
    _gaq.push(["_addOrganic", "liveinternet.ru", "ask"]);
    _gaq.push(["_addOrganic", "quintura.ru", "request"]);
    _gaq.push(["_addOrganic", "search.qip.ru","query"]);
    _gaq.push(["_addOrganic", "gde.ru","keywords"]);
    _gaq.push(["_addOrganic", "search.ukr.net","search_query"]);
    _gaq.push(["_addOrganic", "gogo.ru","q"]);

    _gaq.push(['_setAccount', 'UA-2056213-15']);
    _gaq.push(['_trackPageview']);

    (function() {
        var ga = document.createElement('script');
        ga.async = true;
        ga.src = 'http://google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(ga, s);
    })();

</script>
</div>
 


</body></html>